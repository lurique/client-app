<div>
  <modal :title="text.title" effect="fade" width="800" v-model="showModal" @closed="closed">

    <form class="form-horizontal">

      <section class="row">

        <div class="col-xs-12">
          <bs-input form-type="horizontal" label="Name" name="name"
            v-model="model.name" v-validate.initial="'required'"
            data-vv-scope="modals" :error="makeError('name', 'modals')"
          ></bs-input>
        </div>

        <div class="col-xs-12 text-right clearfix">
          <button v-if="!ownProvider" type="button" class="btn btn-primary btn-xs" @click="changeProvider(true)">I have my own Provider</button>
          <button v-if="ownProvider" type="button" class="btn btn-warning btn-xs" @click="changeProvider(false)">Back to Cloud providers</button>
        </div>

        <div class="col-xs-12 mt10">
          <bs-select v-if="!ownProvider" form-type="horizontal" :options="options.provider" v-model="provider" name="provider"
                     label="Provider" v-validate.initial="'required'" @selected="setupRegions"></bs-select>
          <bs-input v-if="ownProvider" form-type="horizontal" label="Provider" name="provider" v-model="provider"></bs-input>

           <div class="text-right">
             <a href="#" @click.stop.prevent="showModalRegions = true"><i class="fa fa-plus-circle"></i> Create Regions ({{options.regions.length}})</a>
           </div>
          <bs-select form-type="horizontal" :options="options.regions" v-model="regions" name="regions[]"
                      label="Regions" multiple placeholder="All Regions Avaliable"
                      help="Select wich regions is permitted" @selected="setupZones"></bs-select>


          <div class="text-right">
            <a href="#" @click.stop.prevent="showModalZones = true"><i class="fa fa-plus-circle"></i> Create Zones ({{options.zones.length}})</a>
          </div>
          <bs-select form-type="horizontal" :options="options.zones" v-model="zones"
                      label="Zones" multiple placeholder="All Zones Avaliable" help="Select wich zones is permitted"></bs-select>

          <hr/>

          <h4>Provider Connection {{provider}}</h4>
          <div v-if="provider == 'AWS'">
            <bs-input form-type="horizontal" label="Access Key ID" name="name" v-model="auth.key"></bs-input>
            <bs-input form-type="horizontal" label="Secret Access Key" name="name" v-model="auth.secret"></bs-input>

            <button type="button" class="btn btn-success btn-xs pull-right">validate</button>
          </div>

          <div v-if="provider == 'OpenStack'">
            <bs-select form-type="horizontal" :options="options.connections.openstack" v-model="auth.security"
                      label="Security Protocol"></bs-select>

            <bs-input form-type="horizontal" label="URL (IPv4)" name="name" v-model="auth.ip"></bs-input>
            <bs-input form-type="horizontal" label="API Port" name="name" v-model="auth.port"></bs-input>
            <bs-input form-type="horizontal" label="Password" name="name" v-model="auth.password"></bs-input>

            <button type="button" class="btn btn-success btn-xs pull-right">validate</button>
          </div>

        </div>

      </section>

    </form>


    <div slot="modal-footer" class="modal-footer">
      <button type="button" class="btn btn-default" @click="closed">Cancel</button>
      <button type="button" class="btn btn-primary" @click="actionClick"
              :disabled="errors.any('modals')">Create Database
      </button>
    </div>

  </modal>

  <modal :title="'Regions ' + provider" effect="fade" v-model="showModalRegions" @closed="showModalRegions = false"
         sub-modal small>
    <div class="row">
      <div class="col-xs-12">
        <small>I would like to delimit which regions can be used (Can create more than one region).</small>
        <form>
          <bs-input class="mt10" v-model="region" label="Region" placeholder="sa-east-1"></bs-input>
        </form>
        <a href="#" @click.prevent.stop="addRegions" class="btn btn-primary btn-sm pull-left"><i
          class="fa fa-plus-circle"></i> Region</a>
      </div>
    </div>

    <div class="well col-xs-12 mt10">
      <ul v-if="options.regions.length > 0" class="list-group">
        <li class="list-group-item" v-for="znc, index in options.regions" :key="index">
          {{znc}}

          <button class="btn btn-danger btn-xs pull-right" @click.prevent="deleteRegions(index)"><i
            class="fa fa-trash" aria-hidden="true"></i></button>
        </li>
      </ul>
      <span v-if="options.regions.length <= 0" class="col-xs-12 text-center">None regions</span>
      <bs-label v-if="options.regions.length > 0" type="default">{{options.regions.length}} Region<span
        v-if="options.regions.length > 1">s</span></bs-label>
    </div>


    <div slot="modal-footer" class="modal-footer">
      <button type="button" class="btn btn-danger" @click="clearRegions()">Clear Regions</button>
      <button type="button" class="btn btn-primary" @click="showModalRegions = false">Add Regions</button>
    </div>
  </modal>

  <modal :title="'Zones ' + provider" effect="fade" v-model="showModalZones" @closed="showModalZones = false"
         sub-modal small>
    <div class="row">
      <div class="col-xs-12">
        <small>I would like to delimit which zones can be used (Can create more than one zone).</small>
        <form>
          <bs-input class="mt10" v-model="zone" label="Zone" placeholder="sa-east-1"></bs-input>
        </form>
        <a href="#" @click.prevent.stop="addZones" class="btn btn-primary btn-sm pull-left"><i
          class="fa fa-plus-circle"></i> Zone</a>
      </div>
    </div>

    <div class="well col-xs-12 mt10">
      <ul v-if="options.zones.length > 0" class="list-group">
        <li class="list-group-item" v-for="znc, index in options.zones" :key="index">
          {{znc}}

          <button class="btn btn-danger btn-xs pull-right" @click.prevent="deleteZones(index)"><i
            class="fa fa-trash" aria-hidden="true"></i></button>
        </li>
      </ul>
      <span v-if="options.zones.length <= 0" class="col-xs-12 text-center">None zone</span>
      <bs-label v-if="options.zones.length > 0" type="default">{{options.zones.length}} Zone<span
        v-if="options.zones.length > 1">s</span></bs-label>
    </div>


    <div slot="modal-footer" class="modal-footer">
      <button type="button" class="btn btn-danger" @click="clearZones()">Clear Zones</button>
      <button type="button" class="btn btn-primary" @click="showModalZones = false">Add Zones</button>
    </div>
  </modal>
</div>
