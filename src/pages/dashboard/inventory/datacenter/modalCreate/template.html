<div>
  <modal :title="text.title" effect="fade" width="800" v-model="showModal" @closed="closed">

    <form class="form-horizontal">

      <section class="row">

        <div class="col-xs-12">
          <bs-input form-type="horizontal" label="Name" name="name"
            v-model="model.name" v-validate.initial="'required'"
            data-vv-scope="modals" :error="makeError('name', 'modals')"
          ></bs-input>
        </div>

        <div class="col-xs-12 text-right clearfix">
          <button v-if="!ownProvider" type="button" class="btn btn-primary btn-xs" @click="changeProvider(true)" :disabled="!this.create">I have my own Provider</button>
          <button v-if="ownProvider" type="button" class="btn btn-warning btn-xs" @click="changeProvider(false)" :disabled="!this.create">Back to Cloud providers</button>
        </div>

        <div class="col-xs-12 mt10">
          <bs-select v-if="!ownProvider" form-type="horizontal" :options="options.provider" v-model="provider" name="provider"
                     label="Provider" :disabled="!this.create" @change="clearRegions"></bs-select>

          <bs-input v-if="ownProvider" form-type="horizontal" label="Provider" name="provider" v-model="provider"></bs-input>


          <div class="row">
            <div class="col-xs-3 text-right mt5">
              <label>Regions</label>
            </div>
            <div class="col-xs-9">
              <button class="btn btn-primary btn-sm" @click.stop.prevent="setupModalRegions" :disabled="!provider">
                <i class="fa fa-cloud-upload"></i> Manange Regions</button>
              {{regions.length}} regions avaliable
            </div>
          </div>

          <div class="row mt20">
            <div class="col-xs-3 text-right mt5">
              <label>Zones</label>
            </div>
            <div class="col-xs-9">
              <button class="btn btn-primary btn-sm" @click.stop.prevent="showModalZones = true" :disabled="regions.length == 0">
                <i class="fa fa-bullseye"></i> Manange Zones</button>
              {{zones.length}} zones avaliable
            </div>
          </div>

          <hr/>

          <h4 v-if="!ownProvider">Provider Connection {{provider}}</h4>
          <div v-if="provider == 'AWS'">
            <bs-input form-type="horizontal" label="Access Key ID" name="name" v-model="auth.key"></bs-input>
            <bs-input form-type="horizontal" label="Secret Access Key" name="name" v-model="auth.secret"></bs-input>

            <button type="button" class="btn btn-success btn-xs pull-right">validate</button>
          </div>

          <div v-if="provider == 'OpenStack'">
            <bs-select form-type="horizontal" :options="options.connections.openstack" v-model="auth.security"
                      label="Security Protocol"></bs-select>

            <bs-input form-type="horizontal" label="URL (IPv4)" name="name" v-model="auth.ip"></bs-input>
            <bs-input form-type="horizontal" label="API Port" name="name" v-model="auth.port"></bs-input>
            <bs-input form-type="horizontal" label="Password" name="name" v-model="auth.password"></bs-input>

            <button type="button" class="btn btn-success btn-xs pull-right">validate</button>
          </div>

        </div>

      </section>

    </form>


    <div slot="modal-footer" class="modal-footer">
      <button type="button" class="btn btn-default" @click="closed">Cancel</button>
      <button type="button" class="btn btn-primary" @click="actionClick"
              :disabled="errors.any('modals')">Save
      </button>
    </div>

  </modal>


  <modal :title="'Regions ' + provider" effect="fade" v-model="showModalRegions" @closed="showModalRegions = false"
         sub-modal small>
    <div class="row">
      <div class="col-xs-12">
        <small>Choose and delimit which regions can be used.</small>
        <form v-if="options.regions.length > 0">
          <bs-select :options="options.regions" v-model="region"
                     label="Region" class="mt10"></bs-select>
        </form>

        <form v-if="options.regions.length == 0">
          <bs-input class="mt10" v-model="regionT" label="Region" placeholder="sa-east-1"></bs-input>
          <a href="#" @click.prevent.stop="addTegionT" class="btn btn-primary btn-sm pull-left"><i
            class="fa fa-plus-circle"></i> Region</a>

        </form>
      </div>
    </div>


    <div class="well col-xs-12 mt10">
      <ul v-if="regions.length > 0" class="list-group mt5">
        <li class="list-group-item" v-for="znc, index in regions" :key="index">
          {{znc}}

          <button class="btn btn-danger btn-xs pull-right" @click.prevent="deleteRegions(index)"><i
            class="fa fa-trash" aria-hidden="true"></i></button>
        </li>
      </ul>
      <span v-if="regions.length <= 0" class="col-xs-12 text-center">None regions</span>
      <bs-label v-if="regions.length > 0" type="default">{{regions.length}} Region<span
        v-if="regions.length > 1">s</span></bs-label>
    </div>


    <div slot="modal-footer" class="modal-footer">
      <button type="button" class="btn btn-danger" @click="clearRegions">Clear Regions</button>
      <button type="button" class="btn btn-primary" @click="submitRegions">Add Regions</button>
    </div>
  </modal>

  <modal :title="'Zones ' + provider" effect="fade" v-model="showModalZones" @closed="showModalZones = false"
         sub-modal small>
    <div class="row">
      <div class="col-xs-12">
        <small>Choose and delimit  which zones can be used.</small>
        <form v-if="options.zones.length >  0">
          <bs-select :options="options.zones" v-model="zone"
                     label="Region" class="mt10"></bs-select>
        </form>

        <form v-if="options.zones.length == 0">
          <bs-input class="mt10" v-model="zoneT" label="Zone" placeholder="sa-east-1a"></bs-input>
          <a href="#" @click.prevent.stop="addZoneT" class="btn btn-primary btn-sm pull-left"><i
            class="fa fa-plus-circle"></i> Zone</a>

        </form>
      </div>
    </div>

    <div class="well col-xs-12 mt10">
      <ul v-if="zones.length > 0" class="list-group">
        <li class="list-group-item" v-for="znc, index in zones" :key="index">
          {{znc}}

          <button class="btn btn-danger btn-xs pull-right" @click.prevent="deleteZones(index)"><i
            class="fa fa-trash" aria-hidden="true"></i></button>
        </li>
      </ul>
      <span v-if="zones.length <= 0" class="col-xs-12 text-center">None zone</span>
      <bs-label v-if="zones.length > 0" type="default">{{zones.length}} Zone<span
        v-if="zones.length > 1">s</span></bs-label>
    </div>


    <div slot="modal-footer" class="modal-footer">
      <button type="button" class="btn btn-danger" @click="clearZones()">Clear Zones</button>
      <button type="button" class="btn btn-primary" @click="showModalZones = false">Add Zones</button>
    </div>
  </modal>
</div>
